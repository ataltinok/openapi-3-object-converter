plugins {
    id("java")
    id("org.openapi.generator") version "7.4.0"
    id("eclipse")
}

group = "de.mcella.openapi.v3"
version = "0.0.2-SNAPSHOT"

repositories {
    mavenCentral()
}

dependencies {
    implementation "org.yaml:snakeyaml:1.24"
    testImplementation "junit:junit:4.12"
    testImplementation "org.hamcrest:hamcrest-all:1.3"
    testImplementation "org.mockito:mockito-core:5.21.0"
}

jar {
    manifest {
        attributes(
            "Class-Path": configurations.runtimeClasspath.collect { it.getName() }.join(" "),
            "Main-Class": "de.mcella.openapi.v3.objectconverter.ObjectConverterMain"
        )
    }
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

test {
    outputs.upToDateWhen { false }
    testLogging {
        showStandardStreams = false
    }
}

openApiValidate {
   inputSpec = "$rootDir/build/libs/openapi.yaml"
}
